{
  "task_id": "P4.T065",
  "created_at": "2025-09-14T19:41:47.145049Z",
  "task": {
    "id": "P4.T065",
    "feature_id": "F026",
    "title": "Design Theme Playground",
    "description": "Design task for Theme Playground",
    "boundaries": {
      "expected_complexity": {
        "value": "1 design doc, ~800-1200 lines",
        "breakdown": "Architecture (400), API spec (300), Data model (200), Diagrams (300)"
      },
      "definition_of_done": {
        "criteria": [
          "Architecture documented with Mermaid diagrams",
          "API endpoints specified in OpenAPI 3.0 format",
          "Data models defined with JSON Schema",
          "Integration points identified and documented",
          "Security threat model completed",
          "Performance requirements specified",
          "Testing strategy defined"
        ],
        "stop_when": "Design approved by architect; do NOT start implementation"
      },
      "scope": {
        "includes": [
          "docs/design/f026-design.md",
          "docs/api/f026-openapi.yaml",
          "docs/schemas/f026-schema.json"
        ],
        "excludes": [
          "implementation code",
          "tests",
          "deployment configs"
        ],
        "restrictions": "Must follow company design template"
      }
    },
    "execution_guidance": {
      "logging": {
        "format": "JSON Lines (JSONL)",
        "required_fields": [
          "timestamp",
          "task_id",
          "step",
          "status",
          "message"
        ],
        "optional_fields": [
          "percent",
          "data",
          "checkpoint"
        ],
        "status_values": [
          "start",
          "progress",
          "done",
          "error",
          "checkpoint"
        ]
      },
      "checkpoints": [
        {
          "id": "cp1",
          "at_percent": 25,
          "description": "Architecture draft complete"
        },
        {
          "id": "cp2",
          "at_percent": 50,
          "description": "API specification complete"
        },
        {
          "id": "cp3",
          "at_percent": 75,
          "description": "Data models and diagrams complete"
        },
        {
          "id": "cp4",
          "at_percent": 100,
          "description": "Review and approval"
        }
      ],
      "monitoring": {
        "metrics_to_track": [],
        "alerts": []
      }
    },
    "resource_requirements": {
      "estimated": {
        "cpu_cores": 1,
        "memory_mb": 512,
        "disk_io_mbps": 10
      },
      "peak": {
        "cpu_cores": 2,
        "memory_mb": 1024,
        "disk_io_mbps": 50,
        "during": "compilation or testing"
      },
      "worker_capabilities_required": [
        "documentation",
        "architecture",
        "api_design"
      ]
    },
    "scheduling_hints": {
      "priority": "medium",
      "preemptible": true,
      "retry_on_failure": true,
      "max_retries": 3,
      "checkpoint_capable": true
    },
    "duration": {
      "optimistic": 4,
      "mostLikely": 8,
      "pessimistic": 16
    },
    "shared_resources": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    },
    "acceptance_checks": [
      {
        "type": "automated",
        "description": "Theme registry with dark/light/high\u2011contrast.",
        "script": "test_p4.t065.sh"
      },
      {
        "type": "automated",
        "description": "Settings UI to preview/apply themes and tweak accent.",
        "script": "test_p4.t065.sh"
      },
      {
        "type": "automated",
        "description": "Persisted across sessions and machines (path shown in UI).",
        "script": "test_p4.t065.sh"
      },
      {
        "type": "manual",
        "description": "Define Theme struct + registry",
        "script": null
      },
      {
        "type": "manual",
        "description": "Replace hardcoded colors with theme lookups",
        "script": null
      }
    ],
    "evidence": [
      {
        "type": "plan",
        "source": "docs/ideas/theme-playground.md",
        "excerpt": "A centralized theme system with dark/light and high\u2011contrast palettes, plus a playground to preview and switch themes live. Persist preferences, expose a few tunables (accent, contrast), and ensure ac",
        "confidence": 1.0,
        "rationale": "Primary feature specification"
      }
    ],
    "implementation_spec": {
      "design_sections": [
        "Executive Summary",
        "System Architecture",
        "API Specification",
        "Data Models",
        "Security Model",
        "Performance Requirements",
        "Testing Strategy",
        "Deployment Plan"
      ],
      "deliverables": [
        "Architecture document (Markdown + Mermaid)",
        "OpenAPI 3.0 specification",
        "JSON Schema definitions",
        "Security threat model",
        "Performance benchmarks"
      ],
      "technical_approach": [
        "Theme core:",
        "Define a `Theme` struct (palettes, borders, emphasis, status colors) and a registry.",
        "Replace ad\u2011hoc Lip Gloss colors with theme lookups.",
        "Adaptive colors for dark/light terminals; high\u2011contrast variant.",
        "Playground:",
        "Settings tab adds a Theme section with preview tiles and quick toggle keys.",
        "Live apply to the whole app; animation optional to avoid flicker.",
        "Persistence:",
        "Save to a small state file (e.g., `$XDG_CONFIG_HOME/go-redis-wq/theme.json`).",
        "Respect `NO_COLOR` and minimal styles mode.",
        "Accessibility:",
        "Contrast checks for text vs background (WCAG-ish heuristic); badges for risky pairs.",
        "Provide a monochrome theme for limited terminals."
      ],
      "user_stories": [
        "I can switch themes quickly and persist my choice.",
        "I can choose a high\u2011contrast theme that remains readable everywhere."
      ]
    }
  },
  "dependencies": [],
  "instructions": {
    "on_complete": "Move this file to finished-tasks/P4.T065.json",
    "on_failure": "Move this file to failed-tasks/P4.T065.json",
    "on_help_needed": "Move to help-me/P4.T065.json",
    "note": "READ THE FULL TASK SPECIFICATION! All details are in the task field.",
    "resource_locks": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    }
  }
}