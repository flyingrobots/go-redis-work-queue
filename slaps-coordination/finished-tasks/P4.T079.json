{
  "task_id": "P4.T079",
  "created_at": "2025-09-14T19:41:47.149298Z",
  "task": {
    "id": "P4.T079",
    "feature_id": "F033",
    "title": "Design Calendar View",
    "description": "Design task for Calendar View",
    "boundaries": {
      "expected_complexity": {
        "value": "1 design doc, ~800-1200 lines",
        "breakdown": "Architecture (400), API spec (300), Data model (200), Diagrams (300)"
      },
      "definition_of_done": {
        "criteria": [
          "Architecture documented with Mermaid diagrams",
          "API endpoints specified in OpenAPI 3.0 format",
          "Data models defined with JSON Schema",
          "Integration points identified and documented",
          "Security threat model completed",
          "Performance requirements specified",
          "Testing strategy defined"
        ],
        "stop_when": "Design approved by architect; do NOT start implementation"
      },
      "scope": {
        "includes": [
          "docs/design/f033-design.md",
          "docs/api/f033-openapi.yaml",
          "docs/schemas/f033-schema.json"
        ],
        "excludes": [
          "implementation code",
          "tests",
          "deployment configs"
        ],
        "restrictions": "Must follow company design template"
      }
    },
    "execution_guidance": {
      "logging": {
        "format": "JSON Lines (JSONL)",
        "required_fields": [
          "timestamp",
          "task_id",
          "step",
          "status",
          "message"
        ],
        "optional_fields": [
          "percent",
          "data",
          "checkpoint"
        ],
        "status_values": [
          "start",
          "progress",
          "done",
          "error",
          "checkpoint"
        ]
      },
      "checkpoints": [
        {
          "id": "cp1",
          "at_percent": 25,
          "description": "Architecture draft complete"
        },
        {
          "id": "cp2",
          "at_percent": 50,
          "description": "API specification complete"
        },
        {
          "id": "cp3",
          "at_percent": 75,
          "description": "Data models and diagrams complete"
        },
        {
          "id": "cp4",
          "at_percent": 100,
          "description": "Review and approval"
        }
      ],
      "monitoring": {
        "metrics_to_track": [],
        "alerts": []
      }
    },
    "resource_requirements": {
      "estimated": {
        "cpu_cores": 1,
        "memory_mb": 512,
        "disk_io_mbps": 10
      },
      "peak": {
        "cpu_cores": 2,
        "memory_mb": 1024,
        "disk_io_mbps": 50,
        "during": "compilation or testing"
      },
      "worker_capabilities_required": [
        "documentation",
        "architecture",
        "api_design"
      ]
    },
    "scheduling_hints": {
      "priority": "medium",
      "preemptible": true,
      "retry_on_failure": true,
      "max_retries": 3,
      "checkpoint_capable": true
    },
    "duration": {
      "optimistic": 4,
      "mostLikely": 8,
      "pessimistic": 16
    },
    "shared_resources": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    },
    "acceptance_checks": [
      {
        "type": "automated",
        "description": "Month/Week/Day views with keyboard navigation and counts.",
        "script": "test_p4.t079.sh"
      },
      {
        "type": "automated",
        "description": "Reschedule flow updates ZSET timestamp and reflects in view.",
        "script": "test_p4.t079.sh"
      },
      {
        "type": "automated",
        "description": "CRUD for recurring rules with pause/resume.",
        "script": "test_p4.t079.sh"
      },
      {
        "type": "manual",
        "description": "Admin API: schedules window + rules CRUD",
        "script": null
      },
      {
        "type": "manual",
        "description": "TUI: month/week/day views + navigation",
        "script": null
      }
    ],
    "evidence": [
      {
        "type": "plan",
        "source": "docs/ideas/calendar-view.md",
        "excerpt": "A calendar UI to visualize scheduled and recurring jobs by day/week/month. Users can navigate time ranges, inspect details, reschedule, or pause rules\u2014without leaving the TUI.\n\n> [!note]- **\ud83d\udde3\ufe0f CLAUDE'",
        "confidence": 1.0,
        "rationale": "Primary feature specification"
      }
    ],
    "implementation_spec": {
      "design_sections": [
        "Executive Summary",
        "System Architecture",
        "API Specification",
        "Data Models",
        "Security Model",
        "Performance Requirements",
        "Testing Strategy",
        "Deployment Plan"
      ],
      "deliverables": [
        "Architecture document (Markdown + Mermaid)",
        "OpenAPI 3.0 specification",
        "JSON Schema definitions",
        "Security threat model",
        "Performance benchmarks"
      ],
      "technical_approach": [
        "Data model:",
        "Scheduled jobs: Redis ZSET per queue (score = epoch seconds) or existing schedule store; list endpoints per time window.",
        "Recurring rules: store cron spec + metadata (timezone, jitter, max in\u2011flight).",
        "Admin API:",
        "List scheduled window: `/schedules?from&till&queue` returns items and counts.",
        "CRUD recurring rules: create, pause/resume, delete.",
        "Reschedule: move item to a new timestamp (idempotent re\u2011enqueue at time T).",
        "TUI:",
        "Views: Month (heatmap), Week (grid by day), Day (timeline).",
        "Navigation: `h/j/k/l` or arrow keys, `[`/`]` to shift range, `g/G` to jump today/end.",
        "Actions: enter to inspect, `r` to reschedule, `p` to pause rule, `/` filter by queue/tag.",
        "Rendering: compact cells with count badges; tooltip/overlay for dense cells using `bubblezone` hitboxes.",
        "Safety: timezone explicit in header; confirmation on reschedules; audit entries for changes.",
        "Observability: counts per bucket, peak hour visualization; errors surfaced inline."
      ],
      "user_stories": [
        "I can see scheduled volume per day and drill into a day to inspect items.",
        "I can reschedule an item and confirm the exact new time and queue.",
        "I can pause/resume a recurring rule and see status reflected immediately."
      ]
    }
  },
  "dependencies": [],
  "instructions": {
    "on_complete": "Move this file to finished-tasks/P4.T079.json",
    "on_failure": "Move this file to failed-tasks/P4.T079.json",
    "on_help_needed": "Move to help-me/P4.T079.json",
    "note": "READ THE FULL TASK SPECIFICATION! All details are in the task field.",
    "resource_locks": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    }
  }
}