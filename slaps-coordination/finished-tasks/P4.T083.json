{
  "task_id": "P4.T083",
  "created_at": "2025-09-14T19:41:47.150295Z",
  "task": {
    "id": "P4.T083",
    "feature_id": "F035",
    "title": "Design Json Payload Studio",
    "description": "Design task for Json Payload Studio",
    "boundaries": {
      "expected_complexity": {
        "value": "1 design doc, ~800-1200 lines",
        "breakdown": "Architecture (400), API spec (300), Data model (200), Diagrams (300)"
      },
      "definition_of_done": {
        "criteria": [
          "Architecture documented with Mermaid diagrams",
          "API endpoints specified in OpenAPI 3.0 format",
          "Data models defined with JSON Schema",
          "Integration points identified and documented",
          "Security threat model completed",
          "Performance requirements specified",
          "Testing strategy defined"
        ],
        "stop_when": "Design approved by architect; do NOT start implementation"
      },
      "scope": {
        "includes": [
          "docs/design/f035-design.md",
          "docs/api/f035-openapi.yaml",
          "docs/schemas/f035-schema.json"
        ],
        "excludes": [
          "implementation code",
          "tests",
          "deployment configs"
        ],
        "restrictions": "Must follow company design template"
      }
    },
    "execution_guidance": {
      "logging": {
        "format": "JSON Lines (JSONL)",
        "required_fields": [
          "timestamp",
          "task_id",
          "step",
          "status",
          "message"
        ],
        "optional_fields": [
          "percent",
          "data",
          "checkpoint"
        ],
        "status_values": [
          "start",
          "progress",
          "done",
          "error",
          "checkpoint"
        ]
      },
      "checkpoints": [
        {
          "id": "cp1",
          "at_percent": 25,
          "description": "Architecture draft complete"
        },
        {
          "id": "cp2",
          "at_percent": 50,
          "description": "API specification complete"
        },
        {
          "id": "cp3",
          "at_percent": 75,
          "description": "Data models and diagrams complete"
        },
        {
          "id": "cp4",
          "at_percent": 100,
          "description": "Review and approval"
        }
      ],
      "monitoring": {
        "metrics_to_track": [],
        "alerts": []
      }
    },
    "resource_requirements": {
      "estimated": {
        "cpu_cores": 1,
        "memory_mb": 512,
        "disk_io_mbps": 10
      },
      "peak": {
        "cpu_cores": 2,
        "memory_mb": 1024,
        "disk_io_mbps": 50,
        "during": "compilation or testing"
      },
      "worker_capabilities_required": [
        "documentation",
        "architecture",
        "api_design"
      ]
    },
    "scheduling_hints": {
      "priority": "medium",
      "preemptible": true,
      "retry_on_failure": true,
      "max_retries": 3,
      "checkpoint_capable": true
    },
    "duration": {
      "optimistic": 4,
      "mostLikely": 8,
      "pessimistic": 16
    },
    "shared_resources": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    },
    "acceptance_checks": [
      {
        "type": "automated",
        "description": "JSON lint and schema errors highlighted with line/col.",
        "script": "test_p4.t083.sh"
      },
      {
        "type": "automated",
        "description": "Template list with fuzzy search and quick preview.",
        "script": "test_p4.t083.sh"
      },
      {
        "type": "automated",
        "description": "Enqueue supports count, priority, delay/run\u2011at, and optional cron.",
        "script": "test_p4.t083.sh"
      },
      {
        "type": "manual",
        "description": "Diff/peek integration shows exactly what was sent.",
        "script": null
      },
      {
        "type": "manual",
        "description": "Implement editor widget + linting",
        "script": null
      }
    ],
    "evidence": [
      {
        "type": "plan",
        "source": "docs/ideas/json-payload-studio.md",
        "excerpt": "An in\u2011TUI JSON editor to author, validate, and enqueue job payloads. Includes templates, snippets, schema validation, scheduling (run\u2011at/cron), and pretty diff/peek integration for rapid iteration.\n\n>",
        "confidence": 1.0,
        "rationale": "Primary feature specification"
      }
    ],
    "implementation_spec": {
      "design_sections": [
        "Executive Summary",
        "System Architecture",
        "API Specification",
        "Data Models",
        "Security Model",
        "Performance Requirements",
        "Testing Strategy",
        "Deployment Plan"
      ],
      "deliverables": [
        "Architecture document (Markdown + Mermaid)",
        "OpenAPI 3.0 specification",
        "JSON Schema definitions",
        "Security threat model",
        "Performance benchmarks"
      ],
      "technical_approach": [
        "Editor: textinput/viewport hybrid with syntax highlight (lightweight), bracket matching, and JSON linting.",
        "Templates: load from `config/templates/*.json` or inline; snippet expansion (e.g., `now()`, `uuid()`).",
        "Validation: optional JSON Schema (draft 7) validation per queue/template; show errors inline.",
        "Enqueue: `e` submits to selected queue; `E` opens count + schedule options (run\u2011at ISO8601, optional cron spec).",
        "Safety: size/field caps; strip secrets from UI logs; confirm in non\u2011test envs.",
        "Integration: peek last enqueued sample; diff between current editor buffer and last run."
      ],
      "user_stories": [
        "I can open a template, edit, validate, and enqueue with one keystroke.",
        "I can schedule a safe backfill at off\u2011peak with guardrails.",
        "I can see a redacted preview and confirm before enqueuing to prod."
      ]
    }
  },
  "dependencies": [],
  "instructions": {
    "on_complete": "Move this file to finished-tasks/P4.T083.json",
    "on_failure": "Move this file to failed-tasks/P4.T083.json",
    "on_help_needed": "Move to help-me/P4.T083.json",
    "note": "READ THE FULL TASK SPECIFICATION! All details are in the task field.",
    "resource_locks": {
      "exclusive_locks": [],
      "shared_limited": [],
      "creates": [],
      "modifies": []
    }
  }
}